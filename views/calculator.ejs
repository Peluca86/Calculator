<style>
    @font-face {
        font-family: "Open 24 Display St";
        src: url('./../assets/font/Open-24-Display-St.ttf');
    }

    .botones {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 10px;
    }

    input {
        width: 45vw;
        border: 0;
        background-color: black;
        color: white;
        font-size: 15vh;
        text-align: end;
    }

    button {
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #f0f0f0;
        border-radius: 100%;
        width: 90px;
        height: 90px;
    }

    .cero {
        width: 100%;
        border-radius: 10vh;
        grid-column: span 2;
        justify-content: center;

    }

    .pantalla {
        background-color: black;
    }

    .pantalla-calculadora {
        background-color: black;
    }

    .calculadora {
        font-family: 'Open 24 Display St';
        max-width: 400px;
        height: 100%;
        margin: 0 auto;
        padding: 20px;
        background-color: black;
        border-radius: 10px;
    }

    .pantalla {
        background-color: #0000;
        color: white;
        border-radius: 5px;
        padding: 10px;
        text-align: right;
        font-size: 32px;
        margin-bottom: 10px;
    }

    .ColorGris {
        background-color: rgb(195, 187, 187);
    }

    .ColorNaranja {
        background-color: orange;
    }
</style>


<div class="calculadora">
    <div class="pantalla" id="display">0</div>
    <div class="botones">
        <button onclick="clearDisplay()">AC</button>
        <button onclick="addToDisplay('(')">(</button>
        <button onclick="addToDisplay(')')">)</button>
        <button class="ColorNaranja" onclick="addToDisplay('/')">/</button>

        <button class="ColorGris" onclick="addToDisplay('7')">7</button>
        <button class="ColorGris" onclick="addToDisplay('8')">8</button>
        <button class="ColorGris" onclick="addToDisplay('9')">9</button>
        <button class="ColorNaranja" onclick="addToDisplay('*')">x</button>

        <button class="ColorGris" onclick="addToDisplay('4')">4</button>
        <button class="ColorGris" onclick="addToDisplay('5')">5</button>
        <button class="ColorGris" onclick="addToDisplay('6')">6</button>
        <button class="ColorNaranja" onclick="addToDisplay('-')">-</button>

        <button class="ColorGris" onclick="addToDisplay('1')">1</button>
        <button class="ColorGris" onclick="addToDisplay('2')">2</button>
        <button class="ColorGris" onclick="addToDisplay('3')">3</button>
        <button class="ColorNaranja" onclick="addToDisplay('+')">+</button>

        <button class="ColorGris cero" onclick="addToDisplay('0')">0</button>
        <button class="ColorGris punto" onclick="addToDisplay('.')">.</button>
        <button class="ColorNaranja" onclick="calculate()">=</button>

    </div>
</div>
<script>
let currentInput = '';
let calculations = [];
let screen = document.getElementById('display');

function addToDisplay(value) {
    currentInput += value;
    screen.innerText = currentInput
}

function clearDisplay() {
        currentInput = '';
        screen.innerText = '0'; 
    }

function calculate() {
    try {
        const result = eval(currentInput);
        const calculation = {
            input: currentInput,
            result: result
        };
        calculations.push(calculation);
        saveCalculations(calculations);
        currentInput = '';
        screen.innerText = result;
    } catch (error) {
        currentInput = '';
        document.getElementById('display').value = 'Error';
    }
}

function saveCalculations(calculations) {
    fetch('/save', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(calculations)
    })
    .then(response => response.json())
    .then(data => {
        console.log(data.message);
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

</script>